"use strict";(self.webpackChunkmesto_project=self.webpackChunkmesto_project||[]).push([[179],{84:()=>{eval("\n// UNUSED EXPORTS: userId\n\n;// CONCATENATED MODULE: ./src/utils/config.js\nconst validationConfig = {\r\n  formValidateSelector: '.validate',\r\n  formSelector: '.form',\r\n  inputSelector: '.form__input',\r\n  submitButtonSelector: '.form__submit',\r\n  inactiveButtonClass: 'button_disabled',\r\n  inputErrorClass: 'form__input_type_error',\r\n  errorElementSelector: '.form__input-error',\r\n  errorElementClassActive: 'form__input-error_active',\r\n};\r\n\r\nconst serverConfig = {\r\n  baseUrl: `${\"https://mesto.nomoreparties.co\"}/v1/${\"plus-cohort-19\"}`,\r\n  headers: {\r\n    authorization: \"39aa7ad8-990f-4e9e-9973-d0685d4f164f\",\r\n    'Content-Type': 'application/json',\r\n  },\r\n};\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./src/components/api.js\n\nvar API_ERROR_MESSAGE = '';\nvar getResponse = function getResponse(res) {\n  if (res.ok) {\n    return res.json();\n  } else {\n    return res.json().then(function (err) {\n      return API_ERROR_MESSAGE = err.message;\n    }).then(function () {\n      return Promise.reject({\n        status: res.status,\n        statusText: res.statusText\n      });\n    });\n  }\n};\nfunction getAppInfo() {\n  return Promise.all([getUserInfo(), getCards()]);\n}\nfunction getUserInfo() {\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/users/me\"), {\n    headers: serverConfig.headers\n  }).then(getResponse);\n}\nfunction setUserInfo(_ref) {\n  var name = _ref.name,\n    about = _ref.about;\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/users/me\"), {\n    method: 'PATCH',\n    headers: serverConfig.headers,\n    body: JSON.stringify({\n      name: name,\n      about: about\n    })\n  }).then(getResponse);\n}\nfunction setUserAvatar(avatar) {\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/users/me/avatar\"), {\n    method: 'PATCH',\n    headers: serverConfig.headers,\n    body: JSON.stringify({\n      avatar: avatar\n    })\n  }).then(getResponse);\n}\nfunction getCards() {\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/cards\"), {\n    headers: serverConfig.headers\n  }).then(getResponse);\n}\nfunction addCard(_ref2) {\n  var name = _ref2.name,\n    link = _ref2.link;\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/cards\"), {\n    method: 'POST',\n    headers: serverConfig.headers,\n    body: JSON.stringify({\n      name: name,\n      link: link\n    })\n  }).then(getResponse);\n}\nfunction deleteCard(cardId) {\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/cards/\").concat(cardId), {\n    method: 'DELETE',\n    headers: serverConfig.headers\n  }).then(getResponse);\n}\nfunction setLike(cardId) {\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/cards/likes/\").concat(cardId), {\n    method: 'PUT',\n    headers: serverConfig.headers\n  }).then(getResponse);\n}\nfunction deleteLike(cardId) {\n  return fetch(\"\".concat(serverConfig.baseUrl, \"/cards/likes/\").concat(cardId), {\n    method: 'DELETE',\n    headers: serverConfig.headers\n  }).then(getResponse);\n}\n;// CONCATENATED MODULE: ./src/utils/constants.js\nconst content = document.querySelector('.content');\r\nconst cardsContainer = content.querySelector('.photo-grid');\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\nconst errorTemplate = document.querySelector(\r\n  '#form-input-error-template'\r\n).content;\r\n\r\n// DOM elements\r\nconst avatarContainer = content.querySelector('.profile__avatar');\r\nconst profileAvatar = content.querySelector('.profile__avatar-img');\r\nconst btnOpenPopupEditProfile =\r\n  content.querySelector('.profile__edit-btn');\r\nconst btnOpenPopupAddCard = content.querySelector('.profile__add-btn');\r\nconst profileName = content.querySelector('.profile__name');\r\nconst profileAbout = content.querySelector('.profile__about');\r\n\r\nconst submitButtonSelector = '.form__submit';\r\nconst formSelector = '.form';\r\nconst submitButtonTextSelector = '.button__text';\r\nconst ellipsisContainerSelector = '.ellipsis';\r\nconst ellipsisClass = 'animated-ellipsis';\r\n\r\nconst photoGridItemSelector = '.photo-grid__item';\r\nconst cardSelector = '.card';\r\nconst cardImageSelector = '.card__img';\r\nconst cardTitleSelector = '.card__title';\r\nconst cardLikeSelector = '.card__like-btn';\r\nconst cardLikeCountSelector = '.card__like-count';\r\nconst cardLikeActiveClass = 'card__like-btn_active';\r\nconst cardLikeWithCountClass = 'card__like-btn_with-count';\r\nconst cardDeleteSelector = '.card__delete-btn';\r\n\r\n// popups\r\nconst popupOpenedClass = 'popup_opened';\r\nconst popupOpenedSelector = '.popup_opened';\r\nconst popupCloseBtnClass = 'popup__close-btn';\r\nconst popupEditAvatar = document.querySelector(\r\n  '.popup_type_edit-avatar'\r\n);\r\nconst popupEditProfile = document.querySelector(\r\n  '.popup_type_edit-profile'\r\n);\r\nconst popupAddCard = document.querySelector('.popup_type_add-card');\r\nconst popupCard = document.querySelector('.popup_type_image');\r\nconst popupConfirmDelete = document.querySelector(\r\n  '.popup_type_confirm-delete'\r\n);\r\nconst cardPopupImage = popupCard.querySelector('.popup__image');\r\nconst cardPopupTitle = popupCard.querySelector('.popup__image-title');\r\n\r\n// forms\r\nconst formAddCard = document.querySelector('.add-card-form');\r\nconst formEditProfile = document.querySelector('.edit-profile-form');\r\nconst nameInput = document.querySelector('#name');\r\nconst aboutInput = document.querySelector('#about');\r\nconst formEditAvatar = document.querySelector('.edit-avatar-form');\r\nconst avatarInput = document.querySelector('#avatar-link');\r\nconst formConfirmDelete = document.querySelector('.confirm-delete-form');\r\n\n;// CONCATENATED MODULE: ./src/utils/utils.js\n\r\n\r\n\r\n\r\nfunction getFormInputValues(form) {\r\n  const formData = new FormData(form);\r\n  const formProps = Object.fromEntries(formData);\r\n  return formProps;\r\n}\r\n\r\nfunction getErrorElement(form, input) {\r\n  return form.querySelector(`.${input.id}-error`);\r\n}\r\n\r\nfunction getFormInputs(form) {\r\n  const inputs = Array.from(form.querySelectorAll('input'));\r\n\r\n  const inputsForValidate = inputs.filter((input) => {\r\n    return (\r\n      !input.disabled &&\r\n      input.type !== 'file' &&\r\n      input.type !== 'reset' &&\r\n      input.type !== 'submit' &&\r\n      input.type !== 'button'\r\n    );\r\n  });\r\n\r\n  return inputsForValidate;\r\n}\r\n\r\nfunction removeInputErrors(form) {\r\n  const inputs = getFormInputs(form);\r\n\r\n  inputs.forEach((input) => {\r\n    const errorElement = getErrorElement(form, input);\r\n    if (errorElement) {\r\n      errorElement.remove();\r\n    }\r\n  });\r\n}\r\n\r\nfunction setButtonState(button, isFormValid) {\r\n  if (isFormValid) {\r\n    button.removeAttribute('disabled');\r\n    button.classList.remove(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    button.setAttribute('disabled', true);\r\n    button.classList.add(validationConfig.inactiveButtonClass);\r\n  }\r\n}\r\n\r\nfunction showButtonLoadingEllipsis(button, text) {\r\n  const submitButtonText = button.querySelector(submitButtonTextSelector);\r\n  const loadingEllipsis = button.querySelector(ellipsisContainerSelector);\r\n  submitButtonText.textContent = text;\r\n  loadingEllipsis.classList.add(ellipsisClass);\r\n}\r\n\r\nfunction hideButtonLoadingEllipsis(button, text) {\r\n  const submitButtonText = button.querySelector(submitButtonTextSelector);\r\n  const loadingEllipsis = button.querySelector(ellipsisContainerSelector);\r\n  submitButtonText.textContent = text;\r\n  loadingEllipsis.classList.remove(ellipsisClass);\r\n}\r\n\r\nfunction getPopupElement(button) {\r\n  const popupSelector = `.${button.dataset.popup}`;\r\n  return document.querySelector(popupSelector);\r\n}\r\n\r\nfunction loadImage(url) {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.src = url;\r\n    img.onerror = () => reject(url);\r\n    img.onload = () => resolve(url);\r\n  });\r\n}\r\n\r\nfunction confirmSubmit(form) {\r\n  return new Promise((res, rej) => {});\r\n}\r\n\n;// CONCATENATED MODULE: ./src/components/modal.js\n\nfunction openPopup(popup) {\n  popup.classList.add(popupOpenedClass);\n  setPopupCloseListeners();\n}\nfunction openedPopupWithForm(popup, handleSubmit) {\n  openPopup(popup);\n  var form = popup.querySelector(formSelector);\n  form.addEventListener('submit', handleSubmit);\n}\nfunction closePopup(popup) {\n  removePopupCloseListeners();\n  popup.classList.remove(popupOpenedClass);\n}\nfunction closePopupWithForm(popup, handleSubmit) {\n  var form = popup.querySelector(formSelector);\n  form.removeEventListener('submit', handleSubmit);\n  closePopup(popup);\n}\n// ===============================\n\nvar handlePopupCloseClick = function handlePopupCloseClick(evt) {\n  var classList = evt.target.classList;\n  if (classList.contains(popupCloseBtnClass) || classList.contains(popupOpenedClass)) {\n    var openedPopup = document.querySelector(popupOpenedSelector);\n    closePopup(openedPopup);\n    removePopupCloseListeners();\n  }\n};\nvar handlePopupCloseEsc = function handlePopupCloseEsc(evt) {\n  if (evt.key === 'Escape') {\n    var openedPopup = document.querySelector(popupOpenedSelector);\n    closePopup(openedPopup);\n  }\n};\nfunction setPopupCloseListeners() {\n  document.addEventListener('mousedown', handlePopupCloseClick);\n  document.addEventListener('keydown', handlePopupCloseEsc);\n}\nfunction removePopupCloseListeners() {\n  document.removeEventListener('mousedown', handlePopupCloseClick);\n  document.removeEventListener('keydown', handlePopupCloseEsc);\n}\n\n;// CONCATENATED MODULE: ./src/components/card.js\n\n\nfunction isLiked(card) {\n  var cardElement = document.querySelector(\"[data-card-id=\\\"\".concat(card._id, \"\\\"]\"));\n  var cardLikeBtn = cardElement.querySelector(cardLikeSelector);\n  var liked = cardLikeBtn.classList.contains(cardLikeActiveClass);\n  return liked;\n}\nfunction isHasLikes(card) {\n  return card.likes.length > 0;\n}\nfunction changeLike(card) {\n  var cardElement = document.querySelector(\"[data-card-id=\\\"\".concat(card._id, \"\\\"]\"));\n  var cardLikeBtn = cardElement.querySelector(cardLikeSelector);\n  var cardLikeCount = cardElement.querySelector(cardLikeCountSelector);\n  if (isHasLikes(card)) {\n    cardLikeCount.textContent = card.likes.length;\n    cardLikeBtn.classList.add(cardLikeWithCountClass);\n  } else {\n    cardLikeCount.textContent = '';\n    cardLikeBtn.classList.remove(cardLikeWithCountClass);\n  }\n  if (isLiked(card)) {\n    cardLikeBtn.classList.remove(cardLikeActiveClass);\n  } else {\n    cardLikeBtn.classList.add(cardLikeActiveClass);\n  }\n}\nfunction createCardElement(card, userId, handleLikeCard, handleDeleteCard) {\n  var listElement = cardTemplate.querySelector(photoGridItemSelector).cloneNode(true);\n  listElement.setAttribute('data-card-id', card._id);\n  var cardElement = listElement.querySelector(cardSelector);\n  var cardImage = cardElement.querySelector(cardImageSelector);\n  cardImage.src = card.link;\n  cardImage.alt = \"\".concat(card.name, \".\");\n  cardElement.querySelector(cardTitleSelector).textContent = card.name;\n\n  // card popup with image listener\n  function handleCardImageClick(_ref) {\n    var link = _ref.link,\n      name = _ref.name;\n    cardPopupImage.src = link;\n    cardPopupImage.alt = \"\".concat(name, \".\");\n    cardPopupTitle.textContent = name;\n  }\n  cardImage.addEventListener('click', function () {\n    handleCardImageClick(card);\n    openPopup(popupCard);\n  });\n\n  // like button\n  var cardLikeBtn = cardElement.querySelector(cardLikeSelector);\n  var cardLikeCount = cardElement.querySelector(cardLikeCountSelector);\n  var cardDeleteBtn = cardElement.querySelector(cardDeleteSelector);\n  if (isHasLikes(card)) {\n    cardLikeCount.textContent = card.likes.length;\n    cardLikeBtn.classList.add(cardLikeWithCountClass);\n  } else {\n    cardLikeCount.textContent = '';\n  }\n  card.likes.some(function (like) {\n    return like._id === userId;\n  }) ? cardLikeBtn.classList.add(cardLikeActiveClass) : null;\n  cardLikeBtn.addEventListener('click', function () {\n    handleLikeCard(card, isLiked(card));\n  });\n\n  // delete button\n  card.owner._id === userId ? cardDeleteBtn.addEventListener('click', function () {\n    return handleDeleteCard(card);\n  }) : cardDeleteBtn.remove();\n  return listElement;\n}\nfunction removeCard(card) {\n  var deletedCardElement = document.querySelector(\"[data-card-id=\\\"\".concat(card._id, \"\\\"]\"));\n  deletedCardElement.remove();\n}\nfunction renderCard(cardElement, cardsContainer) {\n  cardsContainer.prepend(cardElement);\n}\n\n;// CONCATENATED MODULE: ./src/components/validate.js\n\n\n\nfunction enableValidation(validationConfig) {\n  var forms = Array.from(document.querySelectorAll(validationConfig.formValidateSelector));\n  forms.forEach(function (form) {\n    return setFormEventListeners(form);\n  });\n  function showInputError(form, input, message) {\n    var errorElement = getErrorElement(form, input);\n    errorElement.textContent = message;\n    errorElement.classList.add(validationConfig.errorElementClassActive);\n    input.classList.add(validationConfig.inputErrorClass);\n    input.setAttribute('aria-describedby', \"\".concat(input.id, \"-error\"));\n  }\n  function hideInputError(form, input) {\n    var errorElement = getErrorElement(form, input);\n    input.classList.remove(validationConfig.inputErrorClass);\n    input.removeAttribute('aria-describedby');\n    errorElement.classList.remove(validationConfig.errorElementClassActive);\n    errorElement.textContent = '';\n  }\n  function handleFormInput(form, input) {\n    var errorElement = input.parentNode.querySelector(validationConfig.errorElementSelector);\n    input.validity.patternMismatch ? input.setCustomValidity(input.dataset.errorMessage) : input.setCustomValidity('');\n    if (!input.validity.valid) {\n      // if no error element -> create error DOM node and then show\n      if (!errorElement) {\n        var _errorElement = generateErrorForInput(input);\n        input.parentNode.insertBefore(_errorElement, input.nextSibling);\n      }\n      showInputError(form, input, input.validationMessage);\n    } else {\n      if (errorElement) {\n        hideInputError(form, input);\n      }\n    }\n  }\n  function setFormEventListeners(form) {\n    var inputs = getFormInputs(form);\n    var submitButton = form.querySelector(validationConfig.submitButtonSelector);\n    inputs.forEach(function (input) {\n      input.addEventListener('input', function () {\n        handleFormInput(form, input);\n        setButtonState(submitButton, isFormValid(form));\n      });\n    });\n  }\n}\nfunction isFormValid(form) {\n  var inputs = getFormInputs(form);\n  return inputs.every(function (input) {\n    return input.validity.valid;\n  });\n}\nfunction generateErrorForInput(input) {\n  var errorElement = errorTemplate.querySelector(validationConfig.errorElementSelector).cloneNode(true);\n  errorElement.classList.add(\"\".concat(input.id, \"-error\"));\n  return errorElement;\n}\n;// CONCATENATED MODULE: ./src/components/index.js\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\nvar userId;\nfunction renderInitialPage() {\n  getAppInfo().then(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      user = _ref2[0],\n      cards = _ref2[1];\n    updateUserInfo(user);\n    cards.reverse().forEach(function (card) {\n      renderCard(createCardElement(card, userId, handleLikeCard, handleDeleteCard), cardsContainer);\n    });\n  }).catch(function (err) {\n    console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(err.status, \" \\u043F\\u0440\\u0438 \\u0438\\u043D\\u0438\\u0446\\u0438\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F: \").concat(API_ERROR_MESSAGE));\n  });\n}\nfunction updateUserInfo(user) {\n  profileAbout.textContent = user.about;\n  profileName.textContent = user.name;\n  profileAvatar.src = user.avatar;\n  userId = user._id;\n}\nfunction handleLikeCard(card, isLiked) {\n  isLiked ? deleteLike(card._id).then(function (card) {\n    changeLike(card);\n  }).catch(function (err) {\n    console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(err.status, \" \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u044F \\u043B\\u0430\\u0439\\u043A\\u0430 \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0438: \").concat(API_ERROR_MESSAGE));\n  }) : setLike(card._id).then(function (card) {\n    changeLike(card);\n  }).catch(function (err) {\n    console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(err.status, \" \\u043B\\u0430\\u0439\\u043A\\u0430 \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0438: \").concat(API_ERROR_MESSAGE));\n  });\n}\nfunction handleDeleteCard(card) {\n  var handleSubmit = function handleSubmit(evt) {\n    evt.preventDefault();\n    var submitButton = popupConfirmDelete.querySelector(submitButtonSelector);\n    showButtonLoadingEllipsis(submitButton, 'Удаление');\n    deleteCard(card._id).then(function () {\n      removeCard(card);\n      closePopupWithForm(popupConfirmDelete, handleSubmit);\n    }).catch(function (err) {\n      console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(err.status, \" \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u044F \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0438: \").concat(API_ERROR_MESSAGE));\n    }).finally(function () {\n      hideButtonLoadingEllipsis(submitButton, 'Да');\n    });\n  };\n  openedPopupWithForm(popupConfirmDelete, handleSubmit);\n}\n\n//=============== Form events =====================================\n\nvar handleEditProfileSubmit = function handleEditProfileSubmit(evt) {\n  evt.preventDefault();\n  var submitButton = evt.target.querySelector(submitButtonSelector);\n  showButtonLoadingEllipsis(submitButton, 'Сохранение');\n  var form = evt.target;\n  var _getFormInputValues = getFormInputValues(form),\n    name = _getFormInputValues.name,\n    about = _getFormInputValues.about;\n  setUserInfo({\n    name: name,\n    about: about\n  }).then(function (user) {\n    updateUserInfo(user);\n    closePopup(popupEditProfile);\n  }).catch(function (err) {\n    console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(err.status, \" \\u0440\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F: \").concat(API_ERROR_MESSAGE));\n  }).finally(function () {\n    hideButtonLoadingEllipsis(submitButton, 'Сохранить');\n  });\n};\nvar handleAddCardSubmit = function handleAddCardSubmit(evt) {\n  evt.preventDefault();\n  var submitButton = evt.target.querySelector(submitButtonSelector);\n  showButtonLoadingEllipsis(submitButton, 'Создание');\n  var _getFormInputValues2 = getFormInputValues(formAddCard),\n    name = _getFormInputValues2.name,\n    link = _getFormInputValues2.link;\n  addCard({\n    name: name,\n    link: link\n  }).then(function (card) {\n    var newCard = createCardElement(card);\n    renderCard(newCard, cardsContainer);\n    formAddCard.reset();\n    closePopup(popupAddCard);\n  }).catch(function (err) {\n    console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(err.status, \" \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0438: \").concat(API_ERROR_MESSAGE));\n  }).finally(function () {\n    hideButtonLoadingEllipsis(submitButton, 'Создать');\n  });\n};\nvar handleEditAvatarSubmit = function handleEditAvatarSubmit(evt) {\n  evt.preventDefault();\n  var submitButton = evt.target.querySelector(submitButtonSelector);\n  showButtonLoadingEllipsis(submitButton, 'Сохранение');\n  loadImage(avatarInput.value).then(function (url) {\n    setUserAvatar(url).then(function (user) {\n      updateUserInfo(user);\n      formEditAvatar.reset();\n      closePopup(popupEditAvatar);\n    }).catch(function (err) {\n      console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430 \".concat(err.status, \": \").concat(API_ERROR_MESSAGE));\n    });\n  }).catch(function (url) {\n    console.log(\"image not found for url \".concat(url));\n  }).finally(function () {\n    hideButtonLoadingEllipsis(submitButton, 'Сохранить');\n  });\n};\nformEditProfile.addEventListener('submit', handleEditProfileSubmit);\nformAddCard.addEventListener('submit', handleAddCardSubmit);\nformEditAvatar.addEventListener('submit', handleEditAvatarSubmit);\n\n// ============== popup events ======================================\nvar handleOpenPopupWithForm = function handleOpenPopupWithForm(evt) {\n  var popup = getPopupElement(evt.target);\n  var form = popup.querySelector(validationConfig.formSelector);\n  var submitButton = popup.querySelector(validationConfig.submitButtonSelector);\n  removeInputErrors(form);\n  openPopup(popup);\n  setButtonState(submitButton, isFormValid(form));\n};\nbtnOpenPopupEditProfile.addEventListener('click', function (evt) {\n  nameInput.value = profileName.textContent;\n  aboutInput.value = profileAbout.textContent;\n  handleOpenPopupWithForm(evt);\n});\nbtnOpenPopupAddCard.addEventListener('click', handleOpenPopupWithForm);\navatarContainer.addEventListener('click', handleOpenPopupWithForm);\n\n// ====================================\n\nrenderInitialPage();\nenableValidation(validationConfig);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25CQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekRBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyRkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekRBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUNqSEE7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBOzs7Ozs7OztBQ3ZGQTtBQUVBO0FBV0E7QUFVQTtBQU9BO0FBT0E7QUFxQkE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTs7QUFFQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy91dGlscy9jb25maWcuanM/MDFlYSIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvYXBpLmpzPzg2ODAiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy91dGlscy9jb25zdGFudHMuanM/YzlkOSIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL3V0aWxzL3V0aWxzLmpzP2ZhN2QiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzPzZjZmEiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2NhcmQuanM/MjRjMyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvdmFsaWRhdGUuanM/ZWRkOSIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvaW5kZXguanM/MmFmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1WYWxpZGF0ZVNlbGVjdG9yOiAnLnZhbGlkYXRlJyxcclxuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0JyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckVsZW1lbnRTZWxlY3RvcjogJy5mb3JtX19pbnB1dC1lcnJvcicsXHJcbiAgZXJyb3JFbGVtZW50Q2xhc3NBY3RpdmU6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxyXG59O1xyXG5cclxuY29uc3Qgc2VydmVyQ29uZmlnID0ge1xyXG4gIGJhc2VVcmw6IGAke3Byb2Nlc3MuZW52LkhPU1R9L3YxLyR7cHJvY2Vzcy5lbnYuR1JPVVBfSUR9YCxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBwcm9jZXNzLmVudi5BQ0NFU1NfVE9LRU4sXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnLCBzZXJ2ZXJDb25maWcgfTtcclxuIiwiaW1wb3J0IHsgc2VydmVyQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uZmlnJztcclxuXHJcbmV4cG9ydCBsZXQgQVBJX0VSUk9SX01FU1NBR0UgPSAnJztcclxuXHJcbmNvbnN0IGdldFJlc3BvbnNlID0gKHJlcykgPT4ge1xyXG4gIGlmIChyZXMub2spIHtcclxuICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gcmVzXHJcbiAgICAgIC5qc29uKClcclxuICAgICAgLnRoZW4oKGVycikgPT4gKEFQSV9FUlJPUl9NRVNTQUdFID0gZXJyLm1lc3NhZ2UpKVxyXG4gICAgICAudGhlbigoKSA9PlxyXG4gICAgICAgIFByb21pc2UucmVqZWN0KHtcclxuICAgICAgICAgIHN0YXR1czogcmVzLnN0YXR1cyxcclxuICAgICAgICAgIHN0YXR1c1RleHQ6IHJlcy5zdGF0dXNUZXh0LFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcEluZm8oKSB7XHJcbiAgcmV0dXJuIFByb21pc2UuYWxsKFtnZXRVc2VySW5mbygpLCBnZXRDYXJkcygpXSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7c2VydmVyQ29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgaGVhZGVyczogc2VydmVyQ29uZmlnLmhlYWRlcnMsXHJcbiAgfSkudGhlbihnZXRSZXNwb25zZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICByZXR1cm4gZmV0Y2goYCR7c2VydmVyQ29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgaGVhZGVyczogc2VydmVyQ29uZmlnLmhlYWRlcnMsXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGFib3V0LFxyXG4gICAgfSksXHJcbiAgfSkudGhlbihnZXRSZXNwb25zZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gIHJldHVybiBmZXRjaChgJHtzZXJ2ZXJDb25maWcuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgaGVhZGVyczogc2VydmVyQ29uZmlnLmhlYWRlcnMsXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIGF2YXRhcixcclxuICAgIH0pLFxyXG4gIH0pLnRoZW4oZ2V0UmVzcG9uc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZHMoKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke3NlcnZlckNvbmZpZy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgIGhlYWRlcnM6IHNlcnZlckNvbmZpZy5oZWFkZXJzLFxyXG4gIH0pLnRoZW4oZ2V0UmVzcG9uc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gIHJldHVybiBmZXRjaChgJHtzZXJ2ZXJDb25maWcuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHNlcnZlckNvbmZpZy5oZWFkZXJzLFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBsaW5rLFxyXG4gICAgfSksXHJcbiAgfSkudGhlbihnZXRSZXNwb25zZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gIHJldHVybiBmZXRjaChgJHtzZXJ2ZXJDb25maWcuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgIGhlYWRlcnM6IHNlcnZlckNvbmZpZy5oZWFkZXJzLFxyXG4gIH0pLnRoZW4oZ2V0UmVzcG9uc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0TGlrZShjYXJkSWQpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7c2VydmVyQ29uZmlnLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICBoZWFkZXJzOiBzZXJ2ZXJDb25maWcuaGVhZGVycyxcclxuICB9KS50aGVuKGdldFJlc3BvbnNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke3NlcnZlckNvbmZpZy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgaGVhZGVyczogc2VydmVyQ29uZmlnLmhlYWRlcnMsXHJcbiAgfSkudGhlbihnZXRSZXNwb25zZSk7XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQ7XHJcbmV4cG9ydCBjb25zdCBlcnJvclRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAnI2Zvcm0taW5wdXQtZXJyb3ItdGVtcGxhdGUnXHJcbikuY29udGVudDtcclxuXHJcbi8vIERPTSBlbGVtZW50c1xyXG5leHBvcnQgY29uc3QgYXZhdGFyQ29udGFpbmVyID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWltZycpO1xyXG5leHBvcnQgY29uc3QgYnRuT3BlblBvcHVwRWRpdFByb2ZpbGUgPVxyXG4gIGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBidG5PcGVuUG9wdXBBZGRDYXJkID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ0bicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hYm91dCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvblNlbGVjdG9yID0gJy5mb3JtX19zdWJtaXQnO1xyXG5leHBvcnQgY29uc3QgZm9ybVNlbGVjdG9yID0gJy5mb3JtJztcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvblRleHRTZWxlY3RvciA9ICcuYnV0dG9uX190ZXh0JztcclxuZXhwb3J0IGNvbnN0IGVsbGlwc2lzQ29udGFpbmVyU2VsZWN0b3IgPSAnLmVsbGlwc2lzJztcclxuZXhwb3J0IGNvbnN0IGVsbGlwc2lzQ2xhc3MgPSAnYW5pbWF0ZWQtZWxsaXBzaXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBob3RvR3JpZEl0ZW1TZWxlY3RvciA9ICcucGhvdG8tZ3JpZF9faXRlbSc7XHJcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSAnLmNhcmQnO1xyXG5leHBvcnQgY29uc3QgY2FyZEltYWdlU2VsZWN0b3IgPSAnLmNhcmRfX2ltZyc7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVTZWxlY3RvciA9ICcuY2FyZF9fdGl0bGUnO1xyXG5leHBvcnQgY29uc3QgY2FyZExpa2VTZWxlY3RvciA9ICcuY2FyZF9fbGlrZS1idG4nO1xyXG5leHBvcnQgY29uc3QgY2FyZExpa2VDb3VudFNlbGVjdG9yID0gJy5jYXJkX19saWtlLWNvdW50JztcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlQWN0aXZlQ2xhc3MgPSAnY2FyZF9fbGlrZS1idG5fYWN0aXZlJztcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlV2l0aENvdW50Q2xhc3MgPSAnY2FyZF9fbGlrZS1idG5fd2l0aC1jb3VudCc7XHJcbmV4cG9ydCBjb25zdCBjYXJkRGVsZXRlU2VsZWN0b3IgPSAnLmNhcmRfX2RlbGV0ZS1idG4nO1xyXG5cclxuLy8gcG9wdXBzXHJcbmV4cG9ydCBjb25zdCBwb3B1cE9wZW5lZENsYXNzID0gJ3BvcHVwX29wZW5lZCc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cE9wZW5lZFNlbGVjdG9yID0gJy5wb3B1cF9vcGVuZWQnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDbG9zZUJ0bkNsYXNzID0gJ3BvcHVwX19jbG9zZS1idG4nO1xyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAnLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXInXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAnLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlJ1xyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkLWNhcmQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2ltYWdlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpcm1EZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICcucG9wdXBfdHlwZV9jb25maXJtLWRlbGV0ZSdcclxuKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRQb3B1cEltYWdlID0gcG9wdXBDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRQb3B1cFRpdGxlID0gcG9wdXBDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtdGl0bGUnKTtcclxuXHJcbi8vIGZvcm1zXHJcbmV4cG9ydCBjb25zdCBmb3JtQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtY2FyZC1mb3JtJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1wcm9maWxlLWZvcm0nKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBhYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fib3V0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWF2YXRhci1mb3JtJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXItbGluaycpO1xyXG5leHBvcnQgY29uc3QgZm9ybUNvbmZpcm1EZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1kZWxldGUtZm9ybScpO1xyXG4iLCJpbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi9jb25maWcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBlbGxpcHNpc0NsYXNzLFxyXG4gIGVsbGlwc2lzQ29udGFpbmVyU2VsZWN0b3IsXHJcbiAgc3VibWl0QnV0dG9uVGV4dFNlbGVjdG9yLFxyXG59IGZyb20gJy4vY29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JtSW5wdXRWYWx1ZXMoZm9ybSkge1xyXG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gIGNvbnN0IGZvcm1Qcm9wcyA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YSk7XHJcbiAgcmV0dXJuIGZvcm1Qcm9wcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yRWxlbWVudChmb3JtLCBpbnB1dCkge1xyXG4gIHJldHVybiBmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9ybUlucHV0cyhmb3JtKSB7XHJcbiAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpO1xyXG5cclxuICBjb25zdCBpbnB1dHNGb3JWYWxpZGF0ZSA9IGlucHV0cy5maWx0ZXIoKGlucHV0KSA9PiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAhaW5wdXQuZGlzYWJsZWQgJiZcclxuICAgICAgaW5wdXQudHlwZSAhPT0gJ2ZpbGUnICYmXHJcbiAgICAgIGlucHV0LnR5cGUgIT09ICdyZXNldCcgJiZcclxuICAgICAgaW5wdXQudHlwZSAhPT0gJ3N1Ym1pdCcgJiZcclxuICAgICAgaW5wdXQudHlwZSAhPT0gJ2J1dHRvbidcclxuICAgICk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBpbnB1dHNGb3JWYWxpZGF0ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUlucHV0RXJyb3JzKGZvcm0pIHtcclxuICBjb25zdCBpbnB1dHMgPSBnZXRGb3JtSW5wdXRzKGZvcm0pO1xyXG5cclxuICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGdldEVycm9yRWxlbWVudChmb3JtLCBpbnB1dCk7XHJcbiAgICBpZiAoZXJyb3JFbGVtZW50KSB7XHJcbiAgICAgIGVycm9yRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEJ1dHRvblN0YXRlKGJ1dHRvbiwgaXNGb3JtVmFsaWQpIHtcclxuICBpZiAoaXNGb3JtVmFsaWQpIHtcclxuICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQodmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93QnV0dG9uTG9hZGluZ0VsbGlwc2lzKGJ1dHRvbiwgdGV4dCkge1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvblRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25UZXh0U2VsZWN0b3IpO1xyXG4gIGNvbnN0IGxvYWRpbmdFbGxpcHNpcyA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKGVsbGlwc2lzQ29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIHN1Ym1pdEJ1dHRvblRleHQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGxvYWRpbmdFbGxpcHNpcy5jbGFzc0xpc3QuYWRkKGVsbGlwc2lzQ2xhc3MpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGlkZUJ1dHRvbkxvYWRpbmdFbGxpcHNpcyhidXR0b24sIHRleHQpIHtcclxuICBjb25zdCBzdWJtaXRCdXR0b25UZXh0ID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uVGV4dFNlbGVjdG9yKTtcclxuICBjb25zdCBsb2FkaW5nRWxsaXBzaXMgPSBidXR0b24ucXVlcnlTZWxlY3RvcihlbGxpcHNpc0NvbnRhaW5lclNlbGVjdG9yKTtcclxuICBzdWJtaXRCdXR0b25UZXh0LnRleHRDb250ZW50ID0gdGV4dDtcclxuICBsb2FkaW5nRWxsaXBzaXMuY2xhc3NMaXN0LnJlbW92ZShlbGxpcHNpc0NsYXNzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvcHVwRWxlbWVudChidXR0b24pIHtcclxuICBjb25zdCBwb3B1cFNlbGVjdG9yID0gYC4ke2J1dHRvbi5kYXRhc2V0LnBvcHVwfWA7XHJcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW1hZ2UodXJsKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1nLnNyYyA9IHVybDtcclxuICAgIGltZy5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHVybCk7XHJcbiAgICBpbWcub25sb2FkID0gKCkgPT4gcmVzb2x2ZSh1cmwpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29uZmlybVN1Ym1pdChmb3JtKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge30pO1xyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgcG9wdXBPcGVuZWRDbGFzcyxcclxuICBwb3B1cE9wZW5lZFNlbGVjdG9yLFxyXG4gIHBvcHVwQ2xvc2VCdG5DbGFzcyxcclxuICBmb3JtU2VsZWN0b3IsXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cCkge1xyXG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQocG9wdXBPcGVuZWRDbGFzcyk7XHJcbiAgc2V0UG9wdXBDbG9zZUxpc3RlbmVycygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuZWRQb3B1cFdpdGhGb3JtKHBvcHVwLCBoYW5kbGVTdWJtaXQpIHtcclxuICBvcGVuUG9wdXAocG9wdXApO1xyXG4gIGNvbnN0IGZvcm0gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVTdWJtaXQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZVBvcHVwKHBvcHVwKSB7XHJcbiAgcmVtb3ZlUG9wdXBDbG9zZUxpc3RlbmVycygpO1xyXG4gIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUocG9wdXBPcGVuZWRDbGFzcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlUG9wdXBXaXRoRm9ybShwb3B1cCwgaGFuZGxlU3VibWl0KSB7XHJcbiAgY29uc3QgZm9ybSA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9yKTtcclxuICBmb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVN1Ym1pdCk7XHJcbiAgY2xvc2VQb3B1cChwb3B1cCk7XHJcbn1cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgaGFuZGxlUG9wdXBDbG9zZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gIGNvbnN0IGNsYXNzTGlzdCA9IGV2dC50YXJnZXQuY2xhc3NMaXN0O1xyXG4gIGlmIChcclxuICAgIGNsYXNzTGlzdC5jb250YWlucyhwb3B1cENsb3NlQnRuQ2xhc3MpIHx8XHJcbiAgICBjbGFzc0xpc3QuY29udGFpbnMocG9wdXBPcGVuZWRDbGFzcylcclxuICApIHtcclxuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cE9wZW5lZFNlbGVjdG9yKTtcclxuICAgIGNsb3NlUG9wdXAob3BlbmVkUG9wdXApO1xyXG4gICAgcmVtb3ZlUG9wdXBDbG9zZUxpc3RlbmVycygpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVBvcHVwQ2xvc2VFc2MgPSAoZXZ0KSA9PiB7XHJcbiAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICBjb25zdCBvcGVuZWRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBPcGVuZWRTZWxlY3Rvcik7XHJcbiAgICBjbG9zZVBvcHVwKG9wZW5lZFBvcHVwKTtcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzZXRQb3B1cENsb3NlTGlzdGVuZXJzKCkge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZVBvcHVwQ2xvc2VDbGljayk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZVBvcHVwQ2xvc2VFc2MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVQb3B1cENsb3NlTGlzdGVuZXJzKCkge1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZVBvcHVwQ2xvc2VDbGljayk7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZVBvcHVwQ2xvc2VFc2MpO1xyXG59XHJcblxyXG5leHBvcnQgeyBvcGVuUG9wdXAsIG9wZW5lZFBvcHVwV2l0aEZvcm0sIGNsb3NlUG9wdXAsIGNsb3NlUG9wdXBXaXRoRm9ybSB9O1xyXG4iLCJpbXBvcnQge1xyXG4gIGNhcmRUZW1wbGF0ZSxcclxuICBjYXJkUG9wdXBJbWFnZSxcclxuICBjYXJkUG9wdXBUaXRsZSxcclxuICBwb3B1cENhcmQsXHJcbiAgY2FyZFNlbGVjdG9yLFxyXG4gIGNhcmRJbWFnZVNlbGVjdG9yLFxyXG4gIGNhcmRUaXRsZVNlbGVjdG9yLFxyXG4gIGNhcmRMaWtlU2VsZWN0b3IsXHJcbiAgY2FyZExpa2VBY3RpdmVDbGFzcyxcclxuICBjYXJkRGVsZXRlU2VsZWN0b3IsXHJcbiAgY2FyZExpa2VXaXRoQ291bnRDbGFzcyxcclxuICBjYXJkTGlrZUNvdW50U2VsZWN0b3IsXHJcbiAgcGhvdG9HcmlkSXRlbVNlbGVjdG9yLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5pbXBvcnQgeyBvcGVuUG9wdXAgfSBmcm9tICcuL21vZGFsLmpzJztcclxuXHJcbmZ1bmN0aW9uIGlzTGlrZWQoY2FyZCkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2FyZC1pZD1cIiR7Y2FyZC5faWR9XCJdYCk7XHJcbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRMaWtlU2VsZWN0b3IpO1xyXG4gIGNvbnN0IGxpa2VkID0gY2FyZExpa2VCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKGNhcmRMaWtlQWN0aXZlQ2xhc3MpO1xyXG5cclxuICByZXR1cm4gbGlrZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzSGFzTGlrZXMoY2FyZCkge1xyXG4gIHJldHVybiBjYXJkLmxpa2VzLmxlbmd0aCA+IDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUxpa2UoY2FyZCkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2FyZC1pZD1cIiR7Y2FyZC5faWR9XCJdYCk7XHJcbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRMaWtlU2VsZWN0b3IpO1xyXG4gIGNvbnN0IGNhcmRMaWtlQ291bnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRMaWtlQ291bnRTZWxlY3Rvcik7XHJcblxyXG4gIGlmIChpc0hhc0xpa2VzKGNhcmQpKSB7XHJcbiAgICBjYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QuYWRkKGNhcmRMaWtlV2l0aENvdW50Q2xhc3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKGNhcmRMaWtlV2l0aENvdW50Q2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlzTGlrZWQoY2FyZCkpIHtcclxuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoY2FyZExpa2VBY3RpdmVDbGFzcyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC5hZGQoY2FyZExpa2VBY3RpdmVDbGFzcyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkRWxlbWVudChjYXJkLCB1c2VySWQsIGhhbmRsZUxpa2VDYXJkLCBoYW5kbGVEZWxldGVDYXJkKSB7XHJcbiAgY29uc3QgbGlzdEVsZW1lbnQgPSBjYXJkVGVtcGxhdGVcclxuICAgIC5xdWVyeVNlbGVjdG9yKHBob3RvR3JpZEl0ZW1TZWxlY3RvcilcclxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gIGxpc3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jYXJkLWlkJywgY2FyZC5faWQpO1xyXG5cclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGxpc3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9yKTtcclxuXHJcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkSW1hZ2VTZWxlY3Rvcik7XHJcbiAgY2FyZEltYWdlLnNyYyA9IGNhcmQubGluaztcclxuICBjYXJkSW1hZ2UuYWx0ID0gYCR7Y2FyZC5uYW1lfS5gO1xyXG4gIGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFRpdGxlU2VsZWN0b3IpLnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xyXG5cclxuICAvLyBjYXJkIHBvcHVwIHdpdGggaW1hZ2UgbGlzdGVuZXJcclxuICBmdW5jdGlvbiBoYW5kbGVDYXJkSW1hZ2VDbGljayh7IGxpbmssIG5hbWUgfSkge1xyXG4gICAgY2FyZFBvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIGNhcmRQb3B1cEltYWdlLmFsdCA9IGAke25hbWV9LmA7XHJcbiAgICBjYXJkUG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG5cclxuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBoYW5kbGVDYXJkSW1hZ2VDbGljayhjYXJkKTtcclxuICAgIG9wZW5Qb3B1cChwb3B1cENhcmQpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBsaWtlIGJ1dHRvblxyXG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkTGlrZVNlbGVjdG9yKTtcclxuICBjb25zdCBjYXJkTGlrZUNvdW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkTGlrZUNvdW50U2VsZWN0b3IpO1xyXG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmREZWxldGVTZWxlY3Rvcik7XHJcblxyXG4gIGlmIChpc0hhc0xpa2VzKGNhcmQpKSB7XHJcbiAgICBjYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QuYWRkKGNhcmRMaWtlV2l0aENvdW50Q2xhc3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfVxyXG5cclxuICBjYXJkLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB1c2VySWQpXHJcbiAgICA/IGNhcmRMaWtlQnRuLmNsYXNzTGlzdC5hZGQoY2FyZExpa2VBY3RpdmVDbGFzcylcclxuICAgIDogbnVsbDtcclxuXHJcbiAgY2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBoYW5kbGVMaWtlQ2FyZChjYXJkLCBpc0xpa2VkKGNhcmQpKTtcclxuICB9KTtcclxuXHJcbiAgLy8gZGVsZXRlIGJ1dHRvblxyXG4gIGNhcmQub3duZXIuX2lkID09PSB1c2VySWRcclxuICAgID8gY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGhhbmRsZURlbGV0ZUNhcmQoY2FyZCkpXHJcbiAgICA6IGNhcmREZWxldGVCdG4ucmVtb3ZlKCk7XHJcblxyXG4gIHJldHVybiBsaXN0RWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQ2FyZChjYXJkKSB7XHJcbiAgY29uc3QgZGVsZXRlZENhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIGBbZGF0YS1jYXJkLWlkPVwiJHtjYXJkLl9pZH1cIl1gXHJcbiAgKTtcclxuICBkZWxldGVkQ2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZEVsZW1lbnQsIGNhcmRzQ29udGFpbmVyKSB7XHJcbiAgY2FyZHNDb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGNyZWF0ZUNhcmRFbGVtZW50LCByZW5kZXJDYXJkLCByZW1vdmVDYXJkLCBjaGFuZ2VMaWtlIH07XHJcbiIsImltcG9ydCB7IGVycm9yVGVtcGxhdGUgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBnZXRFcnJvckVsZW1lbnQsXHJcbiAgZ2V0Rm9ybUlucHV0cyxcclxuICBzZXRCdXR0b25TdGF0ZSxcclxufSBmcm9tICcuLi91dGlscy91dGlscy5qcyc7XHJcblxyXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uZmlnLmpzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpIHtcclxuICBjb25zdCBmb3JtcyA9IEFycmF5LmZyb20oXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuZm9ybVZhbGlkYXRlU2VsZWN0b3IpXHJcbiAgKTtcclxuICBmb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiBzZXRGb3JtRXZlbnRMaXN0ZW5lcnMoZm9ybSkpO1xyXG5cclxuICBmdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtLCBpbnB1dCwgbWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZ2V0RXJyb3JFbGVtZW50KGZvcm0sIGlucHV0KTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh2YWxpZGF0aW9uQ29uZmlnLmVycm9yRWxlbWVudENsYXNzQWN0aXZlKTtcclxuXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIGAke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGdldEVycm9yRWxlbWVudChmb3JtLCBpbnB1dCk7XHJcblxyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0aW9uQ29uZmlnLmVycm9yRWxlbWVudENsYXNzQWN0aXZlKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRm9ybUlucHV0KGZvcm0sIGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHZhbGlkYXRpb25Db25maWcuZXJyb3JFbGVtZW50U2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXQudmFsaWRpdHkucGF0dGVybk1pc21hdGNoXHJcbiAgICAgID8gaW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoaW5wdXQuZGF0YXNldC5lcnJvck1lc3NhZ2UpXHJcbiAgICAgIDogaW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgLy8gaWYgbm8gZXJyb3IgZWxlbWVudCAtPiBjcmVhdGUgZXJyb3IgRE9NIG5vZGUgYW5kIHRoZW4gc2hvd1xyXG4gICAgICBpZiAoIWVycm9yRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGdlbmVyYXRlRXJyb3JGb3JJbnB1dChpbnB1dCk7XHJcbiAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZXJyb3JFbGVtZW50LCBpbnB1dC5uZXh0U2libGluZyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNob3dJbnB1dEVycm9yKGZvcm0sIGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZXJyb3JFbGVtZW50KSB7XHJcbiAgICAgICAgaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRGb3JtRXZlbnRMaXN0ZW5lcnMoZm9ybSkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gZ2V0Rm9ybUlucHV0cyhmb3JtKTtcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlRm9ybUlucHV0KGZvcm0sIGlucHV0KTtcclxuICAgICAgICBzZXRCdXR0b25TdGF0ZShzdWJtaXRCdXR0b24sIGlzRm9ybVZhbGlkKGZvcm0pKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1WYWxpZChmb3JtKSB7XHJcbiAgY29uc3QgaW5wdXRzID0gZ2V0Rm9ybUlucHV0cyhmb3JtKTtcclxuICByZXR1cm4gaW5wdXRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUVycm9yRm9ySW5wdXQoaW5wdXQpIHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBlcnJvclRlbXBsYXRlXHJcbiAgICAucXVlcnlTZWxlY3Rvcih2YWxpZGF0aW9uQ29uZmlnLmVycm9yRWxlbWVudFNlbGVjdG9yKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoYCR7aW5wdXQuaWR9LWVycm9yYCk7XHJcblxyXG4gIHJldHVybiBlcnJvckVsZW1lbnQ7XHJcbn1cclxuIiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IHtcclxuICBhZGRDYXJkLFxyXG4gIGRlbGV0ZUxpa2UsXHJcbiAgQVBJX0VSUk9SX01FU1NBR0UsXHJcbiAgZ2V0QXBwSW5mbyxcclxuICBzZXRMaWtlLFxyXG4gIHNldFVzZXJBdmF0YXIsXHJcbiAgc2V0VXNlckluZm8sXHJcbiAgZGVsZXRlQ2FyZCxcclxufSBmcm9tICcuL2FwaS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gIGdldEZvcm1JbnB1dFZhbHVlcyxcclxuICByZW1vdmVJbnB1dEVycm9ycyxcclxuICBzZXRCdXR0b25TdGF0ZSxcclxuICBnZXRQb3B1cEVsZW1lbnQsXHJcbiAgbG9hZEltYWdlLFxyXG4gIHNob3dCdXR0b25Mb2FkaW5nRWxsaXBzaXMsXHJcbiAgaGlkZUJ1dHRvbkxvYWRpbmdFbGxpcHNpcyxcclxufSBmcm9tICcuLi91dGlscy91dGlscy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gIG9wZW5Qb3B1cCxcclxuICBjbG9zZVBvcHVwLFxyXG4gIG9wZW5lZFBvcHVwV2l0aEZvcm0sXHJcbiAgY2xvc2VQb3B1cFdpdGhGb3JtLFxyXG59IGZyb20gJy4vbW9kYWwuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBjaGFuZ2VMaWtlLFxyXG4gIGNyZWF0ZUNhcmRFbGVtZW50LFxyXG4gIHJlbW92ZUNhcmQsXHJcbiAgcmVuZGVyQ2FyZCxcclxufSBmcm9tICcuL2NhcmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBjYXJkc0NvbnRhaW5lcixcclxuICBhdmF0YXJJbnB1dCxcclxuICBmb3JtRWRpdFByb2ZpbGUsXHJcbiAgZm9ybUFkZENhcmQsXHJcbiAgZm9ybUVkaXRBdmF0YXIsXHJcbiAgYnRuT3BlblBvcHVwRWRpdFByb2ZpbGUsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGFib3V0SW5wdXQsXHJcbiAgYnRuT3BlblBvcHVwQWRkQ2FyZCxcclxuICBhdmF0YXJDb250YWluZXIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3IsXHJcbiAgcG9wdXBDb25maXJtRGVsZXRlLFxyXG4gIHBvcHVwRWRpdFByb2ZpbGUsXHJcbiAgcG9wdXBBZGRDYXJkLFxyXG4gIHBvcHVwRWRpdEF2YXRhcixcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbmZpZy5qcyc7XHJcblxyXG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBpc0Zvcm1WYWxpZCB9IGZyb20gJy4vdmFsaWRhdGUuanMnO1xyXG5cclxuZXhwb3J0IGxldCB1c2VySWQ7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJJbml0aWFsUGFnZSgpIHtcclxuICBnZXRBcHBJbmZvKClcclxuICAgIC50aGVuKChbdXNlciwgY2FyZHNdKSA9PiB7XHJcbiAgICAgIHVwZGF0ZVVzZXJJbmZvKHVzZXIpO1xyXG5cclxuICAgICAgY2FyZHMucmV2ZXJzZSgpLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgICByZW5kZXJDYXJkKFxyXG4gICAgICAgICAgY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZCwgdXNlcklkLCBoYW5kbGVMaWtlQ2FyZCwgaGFuZGxlRGVsZXRlQ2FyZCksXHJcbiAgICAgICAgICBjYXJkc0NvbnRhaW5lclxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgIGDQntGI0LjQsdC60LAgJHtlcnIuc3RhdHVzfSDQv9GA0Lgg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0L/RgNC40LvQvtC20LXQvdC40Y86ICR7QVBJX0VSUk9SX01FU1NBR0V9YFxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVVzZXJJbmZvKHVzZXIpIHtcclxuICBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xyXG4gIHByb2ZpbGVBdmF0YXIuc3JjID0gdXNlci5hdmF0YXI7XHJcblxyXG4gIHVzZXJJZCA9IHVzZXIuX2lkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2FyZChjYXJkLCBpc0xpa2VkKSB7XHJcbiAgaXNMaWtlZFxyXG4gICAgPyBkZWxldGVMaWtlKGNhcmQuX2lkKVxyXG4gICAgICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgICAgICBjaGFuZ2VMaWtlKGNhcmQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICBg0J7RiNC40LHQutCwICR7ZXJyLnN0YXR1c30g0YPQtNCw0LvQtdC90LjRjyDQu9Cw0LnQutCwINC60LDRgNGC0L7Rh9C60Lg6ICR7QVBJX0VSUk9SX01FU1NBR0V9YFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KVxyXG4gICAgOiBzZXRMaWtlKGNhcmQuX2lkKVxyXG4gICAgICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgICAgICBjaGFuZ2VMaWtlKGNhcmQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICBg0J7RiNC40LHQutCwICR7ZXJyLnN0YXR1c30g0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC4OiAke0FQSV9FUlJPUl9NRVNTQUdFfWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZCkge1xyXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHBvcHVwQ29uZmlybURlbGV0ZS5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHNob3dCdXR0b25Mb2FkaW5nRWxsaXBzaXMoc3VibWl0QnV0dG9uLCAn0KPQtNCw0LvQtdC90LjQtScpO1xyXG5cclxuICAgIGRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICByZW1vdmVDYXJkKGNhcmQpO1xyXG4gICAgICAgIGNsb3NlUG9wdXBXaXRoRm9ybShwb3B1cENvbmZpcm1EZWxldGUsIGhhbmRsZVN1Ym1pdCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBg0J7RiNC40LHQutCwICR7ZXJyLnN0YXR1c30g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4OiAke0FQSV9FUlJPUl9NRVNTQUdFfWBcclxuICAgICAgICApO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgaGlkZUJ1dHRvbkxvYWRpbmdFbGxpcHNpcyhzdWJtaXRCdXR0b24sICfQlNCwJyk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIG9wZW5lZFBvcHVwV2l0aEZvcm0ocG9wdXBDb25maXJtRGVsZXRlLCBoYW5kbGVTdWJtaXQpO1xyXG59XHJcblxyXG4vLz09PT09PT09PT09PT09PSBGb3JtIGV2ZW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICBzaG93QnV0dG9uTG9hZGluZ0VsbGlwc2lzKHN1Ym1pdEJ1dHRvbiwgJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Jyk7XHJcblxyXG4gIGNvbnN0IGZvcm0gPSBldnQudGFyZ2V0O1xyXG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IGdldEZvcm1JbnB1dFZhbHVlcyhmb3JtKTtcclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KVxyXG4gICAgLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgdXBkYXRlVXNlckluZm8odXNlcik7XHJcbiAgICAgIGNsb3NlUG9wdXAocG9wdXBFZGl0UHJvZmlsZSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYNCe0YjQuNCx0LrQsCAke2Vyci5zdGF0dXN9INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y86ICR7QVBJX0VSUk9SX01FU1NBR0V9YFxyXG4gICAgICApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgaGlkZUJ1dHRvbkxvYWRpbmdFbGxpcHNpcyhzdWJtaXRCdXR0b24sICfQodC+0YXRgNCw0L3QuNGC0YwnKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlQWRkQ2FyZFN1Ym1pdCA9IChldnQpID0+IHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICBzaG93QnV0dG9uTG9hZGluZ0VsbGlwc2lzKHN1Ym1pdEJ1dHRvbiwgJ9Ch0L7Qt9C00LDQvdC40LUnKTtcclxuXHJcbiAgY29uc3QgeyBuYW1lLCBsaW5rIH0gPSBnZXRGb3JtSW5wdXRWYWx1ZXMoZm9ybUFkZENhcmQpO1xyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pXHJcbiAgICAudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZCk7XHJcbiAgICAgIHJlbmRlckNhcmQobmV3Q2FyZCwgY2FyZHNDb250YWluZXIpO1xyXG4gICAgICBmb3JtQWRkQ2FyZC5yZXNldCgpO1xyXG4gICAgICBjbG9zZVBvcHVwKHBvcHVwQWRkQ2FyZCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYNCe0YjQuNCx0LrQsCAke2Vyci5zdGF0dXN9INC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lg6ICR7QVBJX0VSUk9SX01FU1NBR0V9YFxyXG4gICAgICApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgaGlkZUJ1dHRvbkxvYWRpbmdFbGxpcHNpcyhzdWJtaXRCdXR0b24sICfQodC+0LfQtNCw0YLRjCcpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVFZGl0QXZhdGFyU3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIHNob3dCdXR0b25Mb2FkaW5nRWxsaXBzaXMoc3VibWl0QnV0dG9uLCAn0KHQvtGF0YDQsNC90LXQvdC40LUnKTtcclxuXHJcbiAgbG9hZEltYWdlKGF2YXRhcklucHV0LnZhbHVlKVxyXG4gICAgLnRoZW4oKHVybCkgPT4ge1xyXG4gICAgICBzZXRVc2VyQXZhdGFyKHVybClcclxuICAgICAgICAudGhlbigodXNlcikgPT4ge1xyXG4gICAgICAgICAgdXBkYXRlVXNlckluZm8odXNlcik7XHJcbiAgICAgICAgICBmb3JtRWRpdEF2YXRhci5yZXNldCgpO1xyXG4gICAgICAgICAgY2xvc2VQb3B1cChwb3B1cEVkaXRBdmF0YXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICBg0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LDQstCw0YLQsNGA0LAgJHtlcnIuc3RhdHVzfTogJHtBUElfRVJST1JfTUVTU0FHRX1gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgodXJsKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBpbWFnZSBub3QgZm91bmQgZm9yIHVybCAke3VybH1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGhpZGVCdXR0b25Mb2FkaW5nRWxsaXBzaXMoc3VibWl0QnV0dG9uLCAn0KHQvtGF0YDQsNC90LjRgtGMJyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmZvcm1FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XHJcbmZvcm1BZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xyXG5mb3JtRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVFZGl0QXZhdGFyU3VibWl0KTtcclxuXHJcbi8vID09PT09PT09PT09PT09IHBvcHVwIGV2ZW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBoYW5kbGVPcGVuUG9wdXBXaXRoRm9ybSA9IChldnQpID0+IHtcclxuICBjb25zdCBwb3B1cCA9IGdldFBvcHVwRWxlbWVudChldnQudGFyZ2V0KTtcclxuICBjb25zdCBmb3JtID0gcG9wdXAucXVlcnlTZWxlY3Rvcih2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gcG9wdXAucXVlcnlTZWxlY3RvcihcclxuICAgIHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICApO1xyXG5cclxuICByZW1vdmVJbnB1dEVycm9ycyhmb3JtKTtcclxuICBvcGVuUG9wdXAocG9wdXApO1xyXG4gIHNldEJ1dHRvblN0YXRlKHN1Ym1pdEJ1dHRvbiwgaXNGb3JtVmFsaWQoZm9ybSkpO1xyXG59O1xyXG5cclxuYnRuT3BlblBvcHVwRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgYWJvdXRJbnB1dC52YWx1ZSA9IHByb2ZpbGVBYm91dC50ZXh0Q29udGVudDtcclxuXHJcbiAgaGFuZGxlT3BlblBvcHVwV2l0aEZvcm0oZXZ0KTtcclxufSk7XHJcblxyXG5idG5PcGVuUG9wdXBBZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlT3BlblBvcHVwV2l0aEZvcm0pO1xyXG5cclxuYXZhdGFyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlT3BlblBvcHVwV2l0aEZvcm0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5yZW5kZXJJbml0aWFsUGFnZSgpO1xyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///84\n")}},c=>{c(c.s=84)}]);